name: CI — ManusVA

on:
  push:
    branches: [ master ]
    paths:
      - ".github/workflows/ci.yml"
      - "manos-agent.mjs"
      - "tools/**"
      - "supabase_fixes.sql"
      - "tasks_verification.md"
      - "apps/va-server/**"
  workflow_dispatch:

jobs:
  supabase_sql_checks:
    name: Supabase SQL Checks
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Lint SQL (light)
        run: |
          set -e
          echo "Checking SQL presence & basic format..."
          [ -f supabase_fixes.sql ] && echo "supabase_fixes.sql OK" || echo "No supabase_fixes.sql"
          [ -f tools/initial_tasks.sql ] && echo "tools/initial_tasks.sql OK" || echo "No initial_tasks.sql"

  # لا تبني أندرويد هنا — هذا المستودع ليس Flutter
  android_debug_build:
    if: ${{ false }} # Disabled on ManusVA (no Flutter app here)
    runs-on: ubuntu-latest
    steps:
      - run: echo "Disabled."
